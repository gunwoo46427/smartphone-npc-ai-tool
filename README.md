# smartphone-npc-ai-tool
스마트폰 전면 카메라를 활용한 AI 기반 폭주 근점(NPC) 측정 도구
# 스마트폰 폭주 근점 (NPC) 측정 AI 도구

## 🎯 프로젝트 목표
스마트폰 전면 카메라와 AI(컴퓨터 비전)를 활용하여 사용자 스스로 폭주 근점(NPC, Near Point of Convergence)을 정확하게 측정할 수 있는 모바일 애플리케이션을 개발합니다.

## 🛠️ 핵심 기술 스택 (100% 무료 기반)
* **개발 플랫폼:** Flutter (Dart 언어) - 크로스 플랫폼 (iOS/Android) 지원.
* **AI/컴퓨터 비전:** Google MediaPipe Face Mesh - 실시간 얼굴 및 눈동자 랜드마크 추적.
* **코드 관리:** GitHub

## 📐 정확도 확보 전략 (500원 동전 활용)
카메라 거리 측정의 오차를 보정하기 위해, 실제 직경을 알고 있는 **500원 동전 (직경 24.0mm)**을 사용하여 픽셀-실제 거리 변환 상수를 확보합니다.

---

## 1단계 요구사항: 거리 보정 화면 프로토타입

### 기능 A: 보정 모드 시작
* 앱 시작 시 가장 먼저 진입하는 화면입니다.
* 전면 카메라 피드를 화면에 실시간으로 출력해야 합니다.

### 기능 B: 500원 동전 인식 및 픽셀 측정
* 화면 중앙에 가이드라인(예: 사각형)을 표시하고, 사용자에게 500원 동전을 그 안에 비추도록 안내합니다.
* MediaPipe를 사용하여 **동전 영역을 인식**하고, 동전의 **픽셀 지름($D_{pixel}$)**을 측정해야 합니다.
* **측정된 $D_{pixel}$ 값**을 애플리케이션 설정에 영구적으로 저장해야 합니다.

### 기능 C: NPC 측정 화면으로 이동
* 보정이 완료되면 **"보정 완료"** 메시지를 띄우고 자동으로 NPC 측정 화면으로 넘어갑니다.

---
## 2단계 요구사항: 거리 보정 로직 구현

### 기능 D: Calibrator 클래스 구현
* 위에서 제시된 Dart 코드 구조를 기반으로 `Calibrator` 클래스를 구현해야 합니다.
* 이 클래스는 500원 동전의 픽셀 지름을 입력받아 **픽셀-거리 변환 상수 ($K$)**를 계산하고 저장하는 역할을 합니다.

### 기능 E: 상수 영구 저장
* 계산된 보정 상수 $\text{K}$ 값은 앱을 다시 시작해도 유지될 수 있도록 스마트폰의 **로컬 저장소** (예: Flutter의 `shared_preferences`)에 저장되어야 합니다.
* 앱이 시작될 때마다 저장된 $\text{K}$ 값을 자동으로 불러와야 합니다.
---

## 3단계 요구사항: NPC 측정 및 폭주 감지 로직 구현

### 기능 F: NpcMeasurer 클래스 구현
* 위에서 제시된 Dart 코드 구조를 기반으로 `NpcMeasurer` 클래스를 구현해야 합니다.
* 이 클래스는 `Calibrator`를 사용하여 픽셀 거리를 실제 거리로 변환하고, 폭주 파괴를 감지하는 핵심 로직을 담당합니다.

### 기능 G: 흰색 세로 줄 타겟 구현
* NPC 측정 화면의 정중앙에 사용자가 응시할 수 있는 **흰색 세로 줄**을 표시해야 합니다.
* 이 줄은 측정하는 동안 눈동자 움직임의 기준점 역할을 합니다.

### 기능 H: 최종 결과 처리
* `processFrame` 함수가 `true`를 반환하면 (폭주 파괴 감지 시), 측정된 거리($\text{resultNpcMM}$)를 화면에 표시하고 측정을 중지합니다.
* 추가적으로 사용자에게 **"지금 두 줄로 보이나요?"** 라는 질문을 팝업으로 띄워, 사용자의 주관적인 복시 시점과 AI 감지 시점을 비교할 수 있도록 합니다.
* ---

## 4단계 요구사항: 사용자 경험(UX) 및 최종 테스트

### 기능 I: 측정 안내 및 결과 화면
* **안내 기능:** NPC 측정 시작 시 "스마트폰을 코에 가까이 천천히 가져오세요. 흰색 줄이 두 개로 보이거나 집중하기 힘들 때 손가락을 떼거나 화면을 터치하세요." 등의 음성 및 텍스트 안내를 제공해야 합니다.
* **결과 표시:** 측정이 완료되면 최종 $\text{NPC}$ 거리(mm 또는 cm)를 크고 명확하게 표시하고, 평균적인 정상 범위(예: 5-10cm)와 비교하여 결과를 보여줍니다.

### 기능 J: 거리 보정 재실행
* 앱 설정 화면에 **'거리 보정 재실행'** 버튼을 추가하여, 사용자가 다른 스마트폰 케이스를 사용하거나 정확도에 의심이 들 때 언제든지 2단계 보정을 다시 할 수 있도록 기능을 제공해야 합니다.

### 기능 K: 코드 정리 및 주석
* 모든 Dart 코드에 충분한 **주석(Documentation)**을 달아 코드를 이해하기 쉽도록 해야 합니다. 특히, `Calibrator`와 `NpcMeasurer`의 핵심 계산 로직에 대한 설명을 자세히 작성해야 합니다.
